---
title: AI 提供商体系
description: OpenCowork 的 API 提供商抽象层与协议支持。
---

# AI 提供商体系 / API Providers

提供商层位于 `src/renderer/src/lib/api/`，抽象了不同 LLM API 的差异。

## APIProvider 接口

```typescript
interface APIProvider {
  sendMessage(
    messages: Message[],
    config: ProviderConfig,
    signal?: AbortSignal
  ): AsyncIterable<StreamEvent>;
}
```

## 支持的协议 / Protocols

| 协议 | 文件 | 适用提供商 |
|------|------|-----------|
| `anthropic` | `anthropic.ts` | Claude 系列 |
| `openai-chat` | `openai-chat.ts` | OpenAI、DeepSeek、Ollama 等 |
| `openai-responses` | `openai-responses.ts` | OpenAI Responses API |

## StreamEvent 类型

```typescript
type StreamEvent =
  | { type: 'text_delta'; delta: string }
  | { type: 'thinking_delta'; delta: string }
  | { type: 'tool_use_start'; id: string; name: string }
  | { type: 'tool_use_delta'; id: string; delta: string }
  | { type: 'tool_use_end'; id: string }
  | { type: 'message_stop'; usage: Usage }
```

## 提供商特性 / Features

每个提供商配置支持以下特性标志：

- `vision`：是否支持图片输入
- `thinking`：是否支持扩展思考（Extended Thinking）
- `reasoning`：是否支持推理模式
- `pricing`：每百万 token 的输入/输出价格

详见各提供商配置页面：[Anthropic](/docs/providers/anthropic)、[OpenAI](/docs/providers/openai)、[DeepSeek](/docs/providers/deepseek)。
