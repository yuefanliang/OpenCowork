---
title: 构建与打包
description: 构建 OpenCowork 生产版本并打包为各平台安装包。
---

# 构建与打包 / Building & Packaging

## 构建命令 / Build Commands

```bash
# 类型检查 + 构建（推荐）
npm run build

# 构建 + 打包 Windows 安装包
npm run build:win

# 构建 + 打包 macOS 安装包
npm run build:mac

# 构建 + 打包 Linux 安装包
npm run build:linux
```

## 构建产物 / Build Artifacts

打包完成后，安装包位于 `dist/` 目录：

| 平台 | 文件 |
|------|------|
| Windows | `OpenCowork-x.x.x-setup.exe` |
| macOS | `OpenCowork-x.x.x.dmg` |
| Linux | `OpenCowork-x.x.x.AppImage` |

## 构建工具 / Build Tools

- **electron-vite**：统一的 Vite 构建配置，支持主进程、预加载、渲染进程
- **electron-builder**：打包为各平台安装包
- **better-sqlite3**：作为外部依赖处理（不打包进 renderer bundle）

## 自动更新 / Auto Update

OpenCowork 集成了 GitHub Releases 自动更新：

- 应用启动时检查新版本
- 后台下载更新包
- 提示用户重启安装

更新配置在 `electron-builder.yml` 中：

```yaml
publish:
  provider: github
  owner: AIDotNet
  repo: OpenCowork
```

## 环境变量 / Environment Variables

构建时可以通过环境变量配置：

| 变量 | 说明 |
|------|------|
| `VITE_APP_VERSION` | 应用版本号 |
| `GH_TOKEN` | GitHub Token（用于发布 Release） |
