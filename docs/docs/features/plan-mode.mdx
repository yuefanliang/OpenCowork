---
title: 计划模式
description: 使用 Plan Mode 进行结构化任务规划与追踪。
---

# 计划模式 / Plan Mode

计划模式让 Agent 在执行任务前先制定结构化计划，提高复杂任务的成功率。

## 启用计划模式 / Enable Plan Mode

在聊天输入框旁边的工具栏中切换 **Plan Mode** 开关。

启用后，系统提示会包含计划模式指令，Agent 会优先使用任务管理工具。

## 任务工具 / Task Tools

计划模式下 Agent 使用以下工具管理任务：

### TaskCreate

```json
{
  "subject": "实现用户登录功能",
  "description": "使用 JWT 实现用户认证，包括登录、注销和 token 刷新",
  "activeForm": "实现用户登录"
}
```

### TaskUpdate

```json
{
  "taskId": "1",
  "status": "in_progress"
}
```

状态流转：`pending` → `in_progress` → `completed` / `deleted`

### TaskGet / TaskList

获取单个任务详情或列出所有任务，用于追踪进度。

## 任务依赖 / Dependencies

任务之间可以设置依赖关系：

```json
{
  "taskId": "2",
  "addBlockedBy": ["1"]
}
```

被阻塞的任务在依赖完成前不会被执行。

## 数据持久化 / Persistence

任务数据存储在 SQLite 的 `tasks` 和 `plans` 表中，应用重启后保留。
